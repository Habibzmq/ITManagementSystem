<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasks - IT Management System</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/themes.css" />
    <link rel="stylesheet" href="css/tasks.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body data-theme="default">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <div class="logo-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"
              />
              <path
                d="M8 12l2 2 4-4"
                stroke="currentColor"
                stroke-width="2"
                fill="none"
              />
            </svg>
          </div>
          <span>IT Management</span>
        </div>
      </div>

      <nav class="main-nav">
        <a href="index.html" class="nav-item">Home</a>
        <a href="personal-dashboard.html" class="nav-item"
          >Personal Dashboard</a
        >
        <a href="services.html" class="nav-item">Services</a>
        <a href="platforms.html" class="nav-item">Platforms</a>
        <a href="tools.html" class="nav-item">Tools</a>
        <a href="media.html" class="nav-item">Media</a>
      </nav>

      <div class="header-right">
        <span class="welcome-text"
          >Welcome, <span id="userName">John Doe</span></span
        >
        <div class="profile-dropdown">
          <div class="profile-avatar" id="profileAvatar">
            <img
              src="images/default-avatar.png"
              alt="Profile"
              id="profileImage"
            />
          </div>
          <div class="dropdown-menu" id="profileDropdown">
            <a href="profile.html" class="dropdown-item">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                />
              </svg>
              Account Settings
            </a>
            <a href="login.html" class="dropdown-item" id="signOut">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"
                />
              </svg>
              Sign Out
            </a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <div class="content-wrapper">
        <!-- Full Width Content -->
        <div class="tasks-container">
          <div class="page-header">
            <h1 class="page-title">Task Management</h1>
            <p class="page-subtitle">Manage and track all assigned tasks</p>
            <div class="page-actions">
              <button class="btn btn-primary" id="createTaskBtn">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
                Create Task
              </button>
            </div>
          </div>

          <!-- Task Stats -->
          <div class="task-stats">
            <div class="stat-card">
              <div class="stat-icon pending">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 6c.55 0 1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V9c0-.55.45-1 1-1zm0-3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"
                  />
                </svg>
              </div>
              <div class="stat-content">
                <h3>12</h3>
                <p>Pending Tasks</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon in-progress">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3l5 7-5-2-5 2 5-7z"
                  />
                </svg>
              </div>
              <div class="stat-content">
                <h3>8</h3>
                <p>In Progress</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon overdue">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                  />
                </svg>
              </div>
              <div class="stat-content">
                <h3>3</h3>
                <p>Overdue</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon completed">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                  />
                </svg>
              </div>
              <div class="stat-content">
                <h3>45</h3>
                <p>Completed This Month</p>
              </div>
            </div>
          </div>

          <!-- Task Filters -->
          <div class="task-filters">
            <div class="filter-group">
              <label for="statusFilter">Status:</label>
              <select id="statusFilter" class="filter-select">
                <option value="">All Status</option>
                <option value="Pending">Pending</option>
                <option value="In Progress">In Progress</option>
                <option value="Completed">Completed</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="priorityFilter">Priority:</label>
              <select id="priorityFilter" class="filter-select">
                <option value="">All Priorities</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
                <option value="Critical">Critical</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="assignedFilter">Assigned To:</label>
              <select id="assignedFilter" class="filter-select">
                <option value="">All Assignees</option>
                <option value="me">Assigned to Me</option>
                <option value="others">Assigned by Me</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="dueDateFilter">Due Date:</label>
              <select id="dueDateFilter" class="filter-select">
                <option value="">All Dates</option>
                <option value="today">Due Today</option>
                <option value="tomorrow">Due Tomorrow</option>
                <option value="week">Due This Week</option>
                <option value="overdue">Overdue</option>
              </select>
            </div>
            <div class="filter-actions">
              <button class="btn btn-primary" id="applyFilters">Apply</button>
              <button class="btn btn-secondary" id="clearFilters">Clear</button>
            </div>
          </div>

          <!-- Task View Toggle -->
          <div class="view-toggle">
            <button class="view-btn active" id="listViewBtn">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"
                />
              </svg>
              List View
            </button>
            <button class="view-btn" id="boardViewBtn">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"
                />
              </svg>
              Board View
            </button>
          </div>

          <!-- Task List View -->
          <div class="task-view" id="listView">
            <div class="task-table">
              <div class="table-header">
                <div class="header-cell task-title">Task</div>
                <div class="header-cell assigned-to">Assigned To</div>
                <div class="header-cell priority">Priority</div>
                <div class="header-cell status">Status</div>
                <div class="header-cell due-date">Due Date</div>
                <div class="header-cell actions">Actions</div>
              </div>
              <div class="table-body" id="taskTableBody">
                <!-- Task rows will be dynamically generated -->
                <div
                  class="task-row"
                  data-priority="high"
                  data-status="pending"
                >
                  <div class="task-cell task-title">
                    <div class="task-info">
                      <h4>Complete Counter Report #001</h4>
                      <p>
                        Perform full inspection of POS counter at Main Branch
                      </p>
                    </div>
                  </div>
                  <div class="task-cell assigned-to">
                    <div class="assignee">
                      <img
                        src="images/avatars/john.jpg"
                        alt="John Doe"
                        class="assignee-avatar"
                      />
                      <span>John Doe</span>
                    </div>
                  </div>
                  <div class="task-cell priority">
                    <span class="priority-badge high">High</span>
                  </div>
                  <div class="task-cell status">
                    <span class="status-badge pending">Pending</span>
                  </div>
                  <div class="task-cell due-date">
                    <span class="due-today">Today, 5:00 PM</span>
                  </div>
                  <div class="task-cell actions">
                    <button class="btn-icon" onclick="viewTask(1)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="editTask(1)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="markComplete(1)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                        />
                      </svg>
                    </button>
                  </div>
                </div>

                <div
                  class="task-row"
                  data-priority="medium"
                  data-status="in-progress"
                >
                  <div class="task-cell task-title">
                    <div class="task-info">
                      <h4>Update Device Inventory</h4>
                      <p>Update all device information for Branch 02</p>
                    </div>
                  </div>
                  <div class="task-cell assigned-to">
                    <div class="assignee">
                      <img
                        src="images/avatars/sarah.jpg"
                        alt="Sarah Johnson"
                        class="assignee-avatar"
                      />
                      <span>Sarah Johnson</span>
                    </div>
                  </div>
                  <div class="task-cell priority">
                    <span class="priority-badge medium">Medium</span>
                  </div>
                  <div class="task-cell status">
                    <span class="status-badge in-progress">In Progress</span>
                  </div>
                  <div class="task-cell due-date">
                    <span>Tomorrow, 2:00 PM</span>
                  </div>
                  <div class="task-cell actions">
                    <button class="btn-icon" onclick="viewTask(2)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="editTask(2)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="markComplete(2)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                        />
                      </svg>
                    </button>
                  </div>
                </div>

                <div class="task-row" data-priority="low" data-status="pending">
                  <div class="task-cell task-title">
                    <div class="task-info">
                      <h4>Review Security Reports</h4>
                      <p>Weekly security report review for all locations</p>
                    </div>
                  </div>
                  <div class="task-cell assigned-to">
                    <div class="assignee">
                      <img
                        src="images/avatars/mike.jpg"
                        alt="Mike Wilson"
                        class="assignee-avatar"
                      />
                      <span>Mike Wilson</span>
                    </div>
                  </div>
                  <div class="task-cell priority">
                    <span class="priority-badge low">Low</span>
                  </div>
                  <div class="task-cell status">
                    <span class="status-badge pending">Pending</span>
                  </div>
                  <div class="task-cell due-date">
                    <span>Friday, 4:00 PM</span>
                  </div>
                  <div class="task-cell actions">
                    <button class="btn-icon" onclick="viewTask(3)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="editTask(3)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
                        />
                      </svg>
                    </button>
                    <button class="btn-icon" onclick="markComplete(3)">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                        />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Task Board View -->
          <div class="task-view" id="boardView" style="display: none">
            <div class="task-board">
              <div class="board-column">
                <div class="column-header">
                  <h3>Pending</h3>
                  <span class="task-count">5</span>
                </div>
                <div class="column-body" id="pendingColumn">
                  <div class="task-card" data-task-id="1">
                    <div class="task-card-header">
                      <span class="priority-badge high">High</span>
                      <button class="btn-icon" onclick="viewTask(1)">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path
                            d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"
                          />
                        </svg>
                      </button>
                    </div>
                    <h4>Complete Counter Report #001</h4>
                    <p>Perform full inspection of POS counter at Main Branch</p>
                    <div class="task-card-footer">
                      <div class="assignee">
                        <img
                          src="images/avatars/john.jpg"
                          alt="John Doe"
                          class="assignee-avatar"
                        />
                        <span>John Doe</span>
                      </div>
                      <span class="due-date due-today">Today</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="board-column">
                <div class="column-header">
                  <h3>In Progress</h3>
                  <span class="task-count">3</span>
                </div>
                <div class="column-body" id="inProgressColumn">
                  <div class="task-card" data-task-id="2">
                    <div class="task-card-header">
                      <span class="priority-badge medium">Medium</span>
                      <button class="btn-icon" onclick="viewTask(2)">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                          <path
                            d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"
                          />
                        </svg>
                      </button>
                    </div>
                    <h4>Update Device Inventory</h4>
                    <p>Update all device information for Branch 02</p>
                    <div class="task-card-footer">
                      <div class="assignee">
                        <img
                          src="images/avatars/sarah.jpg"
                          alt="Sarah Johnson"
                          class="assignee-avatar"
                        />
                        <span>Sarah Johnson</span>
                      </div>
                      <span class="due-date">Tomorrow</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="board-column">
                <div class="column-header">
                  <h3>Review</h3>
                  <span class="task-count">2</span>
                </div>
                <div class="column-body" id="reviewColumn">
                  <!-- Tasks in review will be loaded here -->
                </div>
              </div>

              <div class="board-column">
                <div class="column-header">
                  <h3>Completed</h3>
                  <span class="task-count">8</span>
                </div>
                <div class="column-body" id="completedColumn">
                  <!-- Completed tasks will be loaded here -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Create/Edit Task Modal -->
    <div class="modal" id="taskModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h3 id="taskModalTitle">Create New Task</h3>
          <button class="btn-icon" onclick="closeTaskModal()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <form id="taskForm">
            <div class="form-row">
              <div class="form-group">
                <label for="taskTitle">Task Title *</label>
                <input
                  type="text"
                  id="taskTitle"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group">
                <label for="taskPriority">Priority *</label>
                <select id="taskPriority" class="form-control" required>
                  <option value="Low">Low</option>
                  <option value="Medium" selected>Medium</option>
                  <option value="High">High</option>
                  <option value="Critical">Critical</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="taskDescription">Description</label>
              <textarea
                id="taskDescription"
                class="form-control"
                rows="4"
                placeholder="Describe the task details..."
              ></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="assignedTo">Assign To *</label>
                <select id="assignedTo" class="form-control" required>
                  <option value="">Select Assignee</option>
                  <option value="1">John Doe</option>
                  <option value="2">Sarah Johnson</option>
                  <option value="3">Mike Wilson</option>
                  <option value="4">Lisa Davis</option>
                </select>
              </div>
              <div class="form-group">
                <label for="taskDueDate">Due Date</label>
                <input
                  type="datetime-local"
                  id="taskDueDate"
                  class="form-control"
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="taskSite">Related Site</label>
                <select id="taskSite" class="form-control">
                  <option value="">Select Site</option>
                  <option value="1">Main Branch</option>
                  <option value="2">Branch 02</option>
                  <option value="3">Branch 03</option>
                </select>
              </div>
              <div class="form-group">
                <label for="taskStatus">Status</label>
                <select id="taskStatus" class="form-control">
                  <option value="Pending">Pending</option>
                  <option value="In Progress">In Progress</option>
                  <option value="Completed">Completed</option>
                  <option value="Cancelled">Cancelled</option>
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="saveTask()">
            Save Task
          </button>
          <button class="btn btn-secondary" onclick="closeTaskModal()">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Task Details Modal -->
    <div class="modal" id="taskDetailsModal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h3 id="taskDetailsTitle">Task Details</h3>
          <button class="btn-icon" onclick="closeTaskDetailsModal()">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="task-details-content" id="taskDetailsContent">
            <!-- Task details will be loaded here -->
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" onclick="editCurrentTask()">
            Edit Task
          </button>
          <button class="btn btn-success" onclick="markTaskComplete()">
            Mark Complete
          </button>
          <button class="btn btn-secondary" onclick="closeTaskDetailsModal()">
            Close
          </button>
        </div>
      </div>
    </div>

    <script src="js/theme-manager.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/tasks.js"></script>
  </body>
</html>
